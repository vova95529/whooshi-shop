<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhooshI — Магазин наушников</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp">
    <style>
        :root {
            --md-sys-color-primary: #fdb913;
            --md-sys-color-secondary: #ff8200;
            --md-sys-color-surface: #f6f6f6;
            --md-sys-color-on-surface: #1c1b1f;
        }
        body { font-family: 'Roboto', sans-serif; background: var(--md-sys-color-surface); color: var(--md-sys-color-on-surface); scroll-behavior: smooth; }
        .m3-card { background: #fff; border-radius: 28px; transition: all 0.3s ease; }
        .m3-button { border-radius: 20px; font-weight: 500; letter-spacing: 0.1px; }
        .whoosh-gradient { background: linear-gradient(135deg, #fdb913 0%, #ff8200 100%); }
        .m3-input { border: 1px solid #79747e; border-radius: 12px; padding: 16px; width: 100%; background: white; }
        #admin-panel { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 1000; backdrop-filter: blur(15px); }
        .musician-img { border-radius: 32px; filter: grayscale(20%); transition: 0.5s; }
        .musician-img:hover { filter: grayscale(0%); transform: scale(1.02); }
    </style>
</head>
<body>

    <script>
        const TELEGRAM_LINK = "https://t.me/v_ushi_shop"; 
        let currentAdminPassword = "";
    </script>

    <!-- Header -->
    <header class="sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-gray-100 px-4 py-3">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-2">
                <div class="w-10 h-10 whoosh-gradient rounded-full flex items-center justify-center shadow-lg text-white font-black text-xl">W</div>
                <h1 class="text-2xl font-black tracking-tighter">Whoosh<span class="text-[#ff8200]">I</span></h1>
            </div>
            <div class="flex items-center gap-4">
                <button onclick="document.getElementById('login-modal').classList.remove('hidden')" class="text-gray-400 hover:text-gray-600 transition">
                    <span class="material-icons-sharp text-sm">lock</span>
                </button>
                <a id="tg-link" href="#" target="_blank" class="whoosh-gradient text-white p-2 rounded-full shadow-lg hover:scale-110 transition">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.8c-.15 1.58-.8 5.42-1.13 7.19-.14.75-.42 1-.68 1.03-.58.05-1.02-.38-1.58-.75-.88-.58-1.38-.94-2.23-1.5-.99-.65-.35-1.01.22-1.59.15-.15 2.71-2.48 2.76-2.69a.2.2 0 00-.05-.18c-.06-.05-.14-.03-.21-.02-.09.02-1.49.95-4.22 2.79-.4.27-.76.41-1.08.4-.36-.01-1.04-.2-1.55-.37-.63-.2-1.12-.31-1.08-.66.02-.18.27-.36.74-.55 2.92-1.27 4.86-2.11 5.83-2.51 2.78-1.16 3.35-1.36 3.73-1.36.08 0 .27.02.39.12.1.08.13.19.14.27-.01.06.01.24 0 .38z"/></svg>
                </a>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="max-w-6xl mx-auto px-4 pt-16 pb-8 text-center">
        <h2 class="text-5xl md:text-7xl font-black tracking-tight mb-6">Звук, который <br><span class="text-[#ff8200]">двигает город.</span></h2>
        
        <!-- Сноска о наушниках -->
        <div class="max-w-2xl mx-auto mb-12">
            <p class="text-xl text-gray-600 leading-relaxed">
                В ритме мегаполиса наушники стали нашей «тихой гаванью» и продолжением личности. 
                Они превращают шум метро в личный концертный зал, а обычную прогулку — в кинематографичное путешествие. 
                В 2026 году звук — это не просто аудио, это твой комфорт, твоя энергия и твой способ быть на связи с собой.
            </p>
        </div>
    </section>

    <!-- Галерея музыкантов -->
    <section class="max-w-6xl mx-auto px-4 mb-20">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="relative group h-80 overflow-hidden rounded-[32px]">
                <img src="https://images.unsplash.com/photo-1598488035139-bdbb2231ce04?auto=format&fit=crop&q=80&w=800" class="w-full h-full object-cover musician-img" alt="Музыкант">
                <div class="absolute bottom-6 left-6 text-white font-bold text-lg">Вдохновение в каждом бите</div>
            </div>
            <div class="relative group h-80 overflow-hidden rounded-[32px]">
                <img src="https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?auto=format&fit=crop&q=80&w=800" class="w-full h-full object-cover musician-img" alt="Музыкант">
                <div class="absolute bottom-6 left-6 text-white font-bold text-lg">Стиль вне времени</div>
            </div>
            <div class="relative group h-80 overflow-hidden rounded-[32px]">
                <img src="https://images.unsplash.com/photo-1493225255756-d9584f8606e9?auto=format&fit=crop&q=80&w=800" class="w-full h-full object-cover musician-img" alt="Музыкант">
                <div class="absolute bottom-6 left-6 text-white font-bold text-lg">Твой личный ритм</div>
            </div>
        </div>
    </section>

    <!-- Витрина товаров -->
    <main class="max-w-6xl mx-auto px-4 pb-20">
        <div class="flex items-center gap-4 mb-10">
            <h3 class="text-3xl font-black">Каталог WhooshI</h3>
            <div class="h-[2px] flex-grow bg-gray-200"></div>
        </div>
        <div id="product-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10">
            <!-- Сюда прилетят товары из БД -->
        </div>
    </section>

    <!-- Футер -->
    <footer class="bg-white border-t border-gray-100 py-16 px-4 mt-20">
        <div class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-12">
            <div>
                <div class="flex items-center gap-2 mb-6">
                    <div class="w-8 h-8 whoosh-gradient rounded-full flex items-center justify-center text-white font-black">W</div>
                    <span class="text-xl font-bold uppercase tracking-widest">WhooshI</span>
                </div>
                <p class="text-gray-500 max-w-sm leading-relaxed">
                    Магазин будущего, созданный в рамках учебного проекта 2026 года. Наша цель — сделать покупку премиального звука такой же простой, как аренду самоката.
                </p>
            </div>
            <div class="flex flex-col md:items-end justify-center">
                <div class="text-left md:text-right">
                    <p class="text-sm font-bold text-gray-400 uppercase tracking-widest mb-2">Статус проекта</p>
                    <p class="text-lg font-medium">Экспериментальный прототип</p>
                    <p class="text-[#ff8200] mt-2 font-bold">Готовимся к запуску в агрегаторах доставки</p>
                </div>
            </div>
        </div>
        <div class="max-w-6xl mx-auto mt-16 pt-8 border-t border-gray-50 text-center text-gray-400 text-xs">
            © 2026 WhooshI Store. Created for educational purposes.
        </div>
    </footer>

    <!-- MODALS (Логика входа, админки и покупки остается прежней) -->
    <!-- ... (вставь сюда модальные окна и скрипты из предыдущего сообщения) ... -->

    <div id="login-modal" class="fixed inset-0 bg-black/50 hidden flex items-center justify-center z-[1100]">
        <div class="bg-white p-8 rounded-[32px] max-w-sm w-full shadow-2xl">
            <h3 class="text-2xl font-bold mb-4 tracking-tight">Вход в систему</h3>
            <input type="password" id="pass-input" placeholder="Пароль администратора" class="m3-input mb-4 focus:ring-2 ring-[#fdb913] outline-none border-none bg-gray-100">
            <button onclick="login()" class="w-full py-4 whoosh-gradient text-white m3-button shadow-lg shadow-yellow-200">Войти в панель</button>
            <button onclick="document.getElementById('login-modal').classList.add('hidden')" class="w-full mt-3 text-gray-400 font-medium">Закрыть</button>
        </div>
    </div>

    <div id="admin-panel" class="overflow-y-auto">
        <div class="max-w-5xl mx-auto my-10 bg-white p-10 rounded-[40px] shadow-2xl">
            <div class="flex justify-between items-center mb-10">
                <h2 class="text-4xl font-black">Dashboard</h2>
                <button onclick="location.reload()" class="bg-gray-100 p-3 rounded-full hover:bg-gray-200 transition">
                    <span class="material-icons-sharp">close</span>
                </button>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                <div class="space-y-6">
                    <h4 class="text-sm font-black uppercase text-gray-400 tracking-widest">Добавить товар</h4>
                    <input type="text" id="p-name" placeholder="Название модели" class="m3-input">
                    <textarea id="p-desc" placeholder="Описание характеристик" class="m3-input h-32"></textarea>
                    <input type="number" id="p-price" placeholder="Цена (RUB)" class="m3-input">
                    <div class="p-4 border-2 border-dashed border-gray-200 rounded-2xl">
                        <input type="file" id="p-img" class="w-full text-sm">
                    </div>
                    <button onclick="addProduct()" class="w-full py-5 whoosh-gradient text-white m3-button text-lg shadow-xl">Опубликовать в каталог</button>
                </div>
                <div>
                    <h4 class="text-sm font-black uppercase text-gray-400 tracking-widest mb-6">Входящие заявки</h4>
                    <div id="orders-list" class="space-y-4 max-h-[600px] overflow-y-auto pr-2"></div>
                </div>
            </div>
            <h4 class="text-sm font-black uppercase text-gray-400 tracking-widest mt-16 mb-6">Управление товарами</h4>
            <div id="admin-products" class="grid grid-cols-1 gap-3"></div>
        </div>
    </div>

    <div id="buy-modal" class="fixed inset-0 bg-black/50 hidden flex items-center justify-center z-[1050] backdrop-blur-sm">
        <div class="bg-white p-10 rounded-[36px] max-w-md w-full mx-4 shadow-2xl">
            <div id="buy-title" class="text-2xl font-black mb-2">Название товара</div>
            <p class="text-gray-500 mb-8">Оставьте данные, и наш менеджер свяжется с вами для оформления доставки.</p>
            <form onsubmit="sendOrder(event)" class="space-y-4">
                <input type="text" id="c-name" placeholder="Ваше имя" required class="m3-input bg-gray-50 border-none">
                <input type="tel" id="c-phone" placeholder="+7 (___) ___ __ __" required class="m3-input bg-gray-50 border-none">
                <input type="email" id="c-email" placeholder="Email для чека" required class="m3-input bg-gray-50 border-none">
                <button type="submit" class="w-full py-5 whoosh-gradient text-white m3-button text-lg shadow-xl mt-4">Подтвердить заказ</button>
                <button type="button" onclick="document.getElementById('buy-modal').classList.add('hidden')" class="w-full py-2 text-gray-400">Отмена</button>
            </form>
        </div>
    </div>

    <script>
        // JS Логика остается полностью идентичной предыдущему сообщению для работы с сервером
        document.getElementById('tg-link').href = TELEGRAM_LINK;

        async function loadProducts() {
            try {
                const res = await fetch('/api/products');
                const products = await res.json();
                const grid = document.getElementById('product-grid');
                const admGrid = document.getElementById('admin-products');
                grid.innerHTML = ''; admGrid.innerHTML = '';

                products.forEach(p => {
                    grid.innerHTML += `
                        <div class="m3-card overflow-hidden border border-gray-100 flex flex-col">
                            <img src="${p.img}" class="w-full h-72 object-cover">
                            <div class="p-8 flex-grow">
                                <h3 class="text-2xl font-black mb-2">${p.name}</h3>
                                <p class="text-gray-500 text-sm mb-6 leading-relaxed">${p.desc}</p>
                                <div class="flex justify-between items-center mt-auto pt-4">
                                    <span class="text-3xl font-black tracking-tight">${p.price} ₽</span>
                                    <button onclick="openBuy('${p.name}')" class="m3-button whoosh-gradient text-white px-8 py-3 shadow-lg shadow-yellow-100">Купить</button>
                                </div>
                            </div>
                        </div>`;
                    admGrid.innerHTML += `
                        <div class="flex justify-between items-center p-4 bg-gray-50 rounded-2xl hover:bg-gray-100 transition">
                            <div class="flex items-center gap-4">
                                <img src="${p.img}" class="w-12 h-12 rounded-xl object-cover">
                                <span class="font-bold">${p.name}</span>
                            </div>
                            <button onclick="deleteProduct(${p.id})" class="text-red-400 hover:text-red-600 material-icons-sharp">delete</button>
                        </div>`;
                });
            } catch(e) {}
        }

        async function login() {
            const pass = document.getElementById('pass-input').value;
            const res = await fetch('/api/get-orders', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({password: pass})
            });
            if(res.ok) {
                currentAdminPassword = pass;
                document.getElementById('login-modal').classList.add('hidden');
                document.getElementById('admin-panel').style.display = 'block';
                loadOrders();
            } else { alert('Доступ запрещен'); }
        }

        async function loadOrders() {
            const res = await fetch('/api/get-orders', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({password: currentAdminPassword})
            });
            const orders = await res.json();
            const list = document.getElementById('orders-list');
            list.innerHTML = orders.reverse().map(o => `
                <div class="p-5 bg-gray-50 border border-gray-100 rounded-3xl">
                    <div class="text-xs font-black uppercase text-[#ff8200] mb-1">${o.product}</div>
                    <div class="font-bold text-lg">${o.name}</div>
                    <div class="text-gray-600">${o.phone} • ${o.email}</div>
                    <div class="text-gray-400 text-[10px] mt-3 uppercase tracking-widest">${o.date}</div>
                </div>
            `).join('');
        }

        async function addProduct() {
            const fileInput = document.getElementById('p-img');
            if(!fileInput.files[0]) return alert('Выберите фото');
            
            const reader = new FileReader();
            reader.onloadend = async () => {
                const product = {
                    name: document.getElementById('p-name').value,
                    desc: document.getElementById('p-desc').value,
                    price: document.getElementById('p-price').value,
                    img: reader.result
                };
                const res = await fetch('/api/products', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({password: currentAdminPassword, product})
                });
                if(res.ok) {
                    loadProducts();
                    document.getElementById('p-name').value = '';
                    document.getElementById('p-desc').value = '';
                    document.getElementById('p-price').value = '';
                }
            };
            reader.readAsDataURL(fileInput.files[0]);
        }

        async function deleteProduct(id) {
            if(!confirm('Удалить товар?')) return;
            await fetch(`/api/products/${id}`, {
                method: 'DELETE',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({password: currentAdminPassword})
            });
            loadProducts();
        }

        function openBuy(name) {
            document.getElementById('buy-title').innerText = name;
            document.getElementById('buy-modal').classList.remove('hidden');
        }

        async function sendOrder(e) {
            e.preventDefault();
            const order = {
                product: document.getElementById('buy-title').innerText,
                name: document.getElementById('c-name').value,
                phone: document.getElementById('c-phone').value,
                email: document.getElementById('c-email').value
            };
            await fetch('/api/orders', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(order)
            });
            alert('Заявка успешно отправлена! Ожидайте звонка.');
            document.getElementById('buy-modal').classList.add('hidden');
        }

        loadProducts();
    </script>
</body>
</html>
